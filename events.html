<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event List - PDIGS-GranSport</title>
    <link rel="stylesheet" href="./css/event-style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
<header id="header">
</header>
<main>
    <h1>Upcoming Events</h1>
    <section id="eventList">
        <!-- Aquí se cargarán los eventos -->
    </section>
</main>
<footer>
    <div class="footer-content">
        <p>Contact Us: <a href="mailto:info@pdigsgs.com">info@pdigsgs.com</a></p>
        <p>Follow us on <a href="#">Social Media</a></p>
        <p>© 2024 PDIGS-GranSport. All rights reserved.</p>
    </div>
</footer>

<!-- Carga de scripts -->
<script type="module">
    import '/js/firebaseIntegration.js'; // Asegúrate de que esta ruta es correcta
    import '/js/loadEvents.js'; // Asegúrate de que esta ruta es correcta
</script>
<script src="/js/eventSearch.js" defer></script>
<script src="/js/imageCarousel.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        console.log('DOMContentLoaded event triggered');
        loadHTMLAndExecuteScripts('#header', './header.html', function() {
            console.log('Header loaded and callback triggered');
            var path = window.location.pathname;
            console.log('Current Path:', path);

            if (path.endsWith('events.html')) {
                var searchInput = document.getElementById('eventSearchInput');
                if (searchInput) {
                    searchInput.style.display = 'inline';
                    console.log('Search input displayed');
                } else {
                    console.error('Element #eventSearchInput not found after header load');
                }
            }
        });
    });

    function loadHTMLAndExecuteScripts(selector, sourceFile, callback) {
        console.log('Attempting to load HTML from:', sourceFile);
        fetch(sourceFile)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.statusText);
                }
                return response.text();
            })
            .then(html => {
                console.log('HTML loaded from ' + sourceFile);
                const container = document.querySelector(selector);
                container.innerHTML = html;
                executeScripts(container);
                if (callback) callback();
            })
            .catch(error => console.error('Error loading ' + sourceFile + ':', error));
    }

    function executeScripts(container) {
        const scripts = container.querySelectorAll('script');
        scripts.forEach(script => {
            const scriptTag = document.createElement('script');
            if (script.src) {
                scriptTag.src = script.src;
            } else {
                scriptTag.textContent = script.textContent;
            }
            document.head.appendChild(scriptTag).parentNode.removeChild(scriptTag);
        });
    }
</script>


</body>
</html>
